function day(a){return moment("2021-01-01").add(a,"day").toDate()}function buildDates(c,b){var a=[];while(c<=b){a.push(day(c));c+=10}return a}function showCharts(){navbarActive("statistics");var a=GoogleAuth.currentUser.get();var c=a.getAuthResponse().id_token;var b=new XMLHttpRequest();b.open("GET","/user/v1/dailystats/id/"+c);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded");b.onload=function(){renderCharts(b.responseText)};b.send()}function renderCharts(g){raw=JSON.parse(g);var f=[];var d=[];var e=[];var k=[];var h=[];for(i in raw){f.push(moment(1000*raw[i].Date).toDate());d.push(raw[i].Travelled);k.push(raw[i].DailyTotal);e.push(raw[i].Travelled/10000);h.push(raw[i].share)}var j=document.getElementById("distancechart").getContext("2d");var a=new Chart(j,{type:"line",data:{labels:f,datasets:[{label:"Daily Allowance",data:k,borderColor:"rgba(1,1,1)",backgroundColor:"rgba(1,1,1)",borderDash:[10,10],fill:false,pointRadius:0},{label:"Distance Travelled",data:d,borderColor:"rgba(170,53,69)",backgroundColor:"rgba(170,53,69)",fill:false,pointRadius:0}]},options:{legend:{labels:{usePointStyle:true}},scales:{xAxes:[{type:"time",time:{unit:"day",unitStepSize:100,round:"day",displayFormats:{day:"YYYY-MM-DD"}}}],yAxes:[{scaleLabel:{display:true,labelString:"Distance Per Day (km)",fontColor:"black"}}]}}});var c=document.getElementById("userdistancechart").getContext("2d");var b=new Chart(c,{type:"line",data:{labels:f,datasets:[{label:"Daily Share",data:h,borderColor:"rgba(1,1,1)",backgroundColor:"rgba(1,1,1)",borderDash:[10,10],fill:false,pointRadius:0},{label:"Distance Travelled",data:e,borderColor:"rgba(170,53,69)",backgroundColor:"rgba(170,53,69)",fill:false,pointRadius:0}]},options:{legend:{labels:{usePointStyle:true}},scales:{xAxes:[{type:"time",time:{unit:"day",unitStepSize:100,round:"day",displayFormats:{day:"YYYY-MM-DD"}}}],yAxes:[{scaleLabel:{display:true,labelString:"Distance Per Day (km)",fontColor:"black"}}]}}})};